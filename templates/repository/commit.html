{% extends "base.html" %}
{% load bootstrap %}
{% block js %}
<script src="/media/js/commit.js" type="text/javascript"></script>
{% endblock %}
{% block content %}
<div class="container">
    <textarea name="abc" id="abc" style="display: None;"></textarea>
    <div class="commit">
        {{ commit }}
    </div>    
    <div id="warnings"></div>
    <div id="paper0"></div>
    <form action="./" method="POST" enctype="application/json">
        {% csrf_token %}
        {{ commit_form|bootstrap }}
        <input class="hidden" id="part-count" name="part-count" type="number" value={{ commit.part.count }} />
        <div class="part-list-container">
            {% for part in commit.part.all %}
            <div class="part-container" style="display: block;">
                <input class="form-control" id="part-order" name="part-order-{{ forloop.counter }}" type="number" value={{ part.order }} />
                <textarea class="form-control" id="part-meta" name="part-meta-{{ forloop.counter }}" type="text">{{ part.meta_data}}</textarea>
                <textarea class="form-control" id="part-notes" name="part-notes-{{ forloop.counter }}" type="text">{{ part.notes }}</textarea>
                <input class="hidden" id="deleted" name="part-deleted-{{ forloop.counter }}" type="number" value=0 />
                <a href="#" class="btn btn-warning" id="part-delete">Delete</a>
            </div>
            {% endfor %}
        </div>
        <a href="#" class="btn btn-safe" id="part-create">Create part</a>
        <button type="submit" class="btn btn-default">Create</button>
    </form>
</div>
{% endblock %}
